% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/optimize_pc_weights.R
\name{optimize_pc_weights}
\alias{optimize_pc_weights}
\title{Optimize PC Weights to Minimize Root Distance}
\usage{
optimize_pc_weights(
  pcs,
  w1,
  w2,
  tau,
  i = NULL,
  use_t_minus_1 = TRUE,
  initial_weights = NULL,
  method = "Nelder-Mead",
  maxit = 1000,
  penalty_complex = HETID_CONSTANTS$OPTIMIZATION_PENALTY,
  dates = NULL
)
}
\arguments{
\item{pcs}{Matrix of principal components (n x J)}

\item{w1}{Vector of reduced form residuals for Y1}

\item{w2}{Vector of reduced form residuals for Y2}

\item{tau}{Quantile parameter between 0 and 1}

\item{i}{Maturity index (for Y2 residuals)}

\item{use_t_minus_1}{Logical, if TRUE uses n-1 in variance/covariance denominators}

\item{initial_weights}{Initial weights (default: equal weights)}

\item{method}{Optimization method (default: "Nelder-Mead")}

\item{maxit}{Maximum iterations (default: 1000)}

\item{penalty_complex}{Penalty for complex roots (default: 1e6)}

\item{dates}{Optional vector of dates corresponding to the time series}
}
\value{
List containing:
\item{optimal_weights}{Optimal normalized weights}
\item{roots}{The two roots at optimal weights}
\item{root_distance}{Distance between roots}
\item{objective_value}{Final objective function value}
\item{convergence}{Convergence indicator from optim}
\item{linear_comb}{The optimal linear combination (data frame if dates provided)}
\item{is_complex}{Whether roots are complex}
\item{dates_used}{If dates provided, the dates used after removing NA values}
}
\description{
Finds the optimal weights for a linear combination of principal components
that minimizes the distance between the two roots of the theta quadratic
equation, with preference for real roots.
}
