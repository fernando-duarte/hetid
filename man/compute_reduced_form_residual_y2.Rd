% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/reduced_form_residuals.R
\name{compute_reduced_form_residual_y2}
\alias{compute_reduced_form_residual_y2}
\title{Compute Reduced Form Residuals for Secondary Endogenous Variables (Y2)}
\usage{
compute_reduced_form_residual_y2(
  yields,
  term_premia,
  maturities,
  n_pcs = 4,
  variables_data = NULL
)
}
\arguments{
\item{yields}{Data frame with columns y1, y2, ..., containing yields}

\item{term_premia}{Data frame with columns tp1, tp2, ..., containing term premia}

\item{maturities}{Vector of maturities (i values) to compute residuals for}

\item{n_pcs}{Integer, number of principal components to use (1-6). Default is 4.}

\item{variables_data}{Optional data frame containing PC variables. If NULL, loads from package.}
}
\value{
A list containing results for each maturity i:
\describe{
\item{residuals}{List of residual vectors W_\{2,i,t+1\} for each i}
\item{fitted}{List of fitted value vectors for each i}
\item{coefficients}{Matrix of regression coefficients (rows = maturities)}
\item{r_squared}{Vector of R-squared values for each maturity}
\item{dates}{Date vector corresponding to residuals}
\item{models}{List of lm objects for each maturity}
\item{sdf_innovations}{List of raw SDF innovation series for each maturity}
}
}
\description{
Computes the residuals W_\{2,i,t+1\} from regressing SDF news innovations (Y_\{2,i,t+1\})
on principal components (PC_t) and a constant for each maturity i.
}
\details{
For each maturity i, the function:
\enumerate{
\item Computes SDF innovations Y_\{2,i,t+1\} using compute_sdf_innovations()
\item Performs the regression: Y_\{2,i,t+1\} = alpha_i + beta_i' * PC_t + W_\{2,i,t+1\}
}

The residuals W_\{2,i,t+1\} are returned for each maturity.
}
\examples{
\dontrun{
# Load ACM data
data <- extract_acm_data(data_types = c("yields", "term_premia"))
yields_data <- data[, grep("^y", names(data))]
tp_data <- data[, grep("^tp", names(data))]

# Compute residuals for maturities 1, 2, 5
res_y2 <- compute_reduced_form_residual_y2(
  yields = yields_data,
  term_premia = tp_data,
  maturities = c(1, 2, 5),
  n_pcs = 4
)

# Access residuals for maturity i=5
w2_5 <- res_y2$residuals[[which(res_y2$maturities == 5)]]
}

}
