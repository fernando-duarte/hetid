% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_w1_residuals.R
\name{compute_w1_residuals}
\alias{compute_w1_residuals}
\title{Compute Reduced Form Residual for Primary Endogenous Variable (Y1)}
\usage{
compute_w1_residuals(
  n_pcs = HETID_CONSTANTS$DEFAULT_N_PCS,
  data = NULL,
  return_df = FALSE
)
}
\arguments{
\item{n_pcs}{Integer, number of principal components to use (1-6). Default is 4.}

\item{data}{Optional data frame containing the variables. If NULL, loads from package data.}

\item{return_df}{Logical, if TRUE returns a data frame with dates (default FALSE).}
}
\value{
If return_df = FALSE, returns a list containing:
\describe{
\item{residuals}{Numeric vector of residuals W_\{1,t+1\}}
\item{fitted}{Numeric vector of fitted values}
\item{coefficients}{Regression coefficients}
\item{r_squared}{R-squared of the regression}
\item{dates}{Date vector corresponding to residuals}
\item{model}{The lm object from the regression}
}
If return_df = TRUE, returns a data frame with columns:
\describe{
\item{date}{Date column}
\item{residuals}{Residuals W_\{1,t+1\}}
\item{fitted}{Fitted values from the regression}
}
}
\description{
Computes the residual W_\{1,t+1\} from regressing consumption growth (Y_\{1,t+1\})
on principal components extracted from financial asset returns (PC_t) and a constant.
}
\details{
The function performs the regression:
Y_\{1,t+1\} = alpha + beta' * PC_t + W_\{1,t+1\}

where Y_\{1,t+1\} is consumption growth and PC_t are the first n_pcs
principal components extracted from financial asset returns (pc1, ..., pc6).
}
\examples{
\dontrun{
# Compute residuals using 4 PCs (default)
res_y1 <- compute_w1_residuals()

# Use only first 2 PCs
res_y1_2pc <- compute_w1_residuals(n_pcs = 2)

# Get results as data frame
res_y1_df <- compute_w1_residuals(n_pcs = 4, return_df = TRUE)
head(res_y1_df)

# Plot residuals
plot(res_y1$dates, res_y1$residuals,
  type = "l",
  xlab = "Date", ylab = "Residual",
  main = "Reduced Form Residuals for Consumption Growth"
)
}

}
